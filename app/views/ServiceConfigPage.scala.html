@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import partials.DependenciesPartial
@import uk.gov.hmrc.cataloguefrontend.ViewMessages
@import uk.gov.hmrc.cataloguefrontend.service.ConfigService._
@import uk.gov.hmrc.cataloguefrontend.service.ConfigService.ConfigByKeyEntry
@import scala.collection.immutable.ListMap

@this(dependenciesPartial: DependenciesPartial, viewMessages: ViewMessages)
@(serviceName: String, configByEnvironment: ConfigByEnvironment, configByKey: ConfigByKey)(implicit messages: Messages, request: Request[_])
<html>
    <head>
        <link rel="stylesheet" href="@routes.Assets.at("config-explorer.css")" />
        <script src="@routes.Assets.at("split.js")"></script>
        <script src="@routes.Assets.at("config-explorer.js")"></script>
    </head>
    <body>
        <header>
            <h1 id="service-header">Config: @serviceName</h1>
        </header>

        <div class="grid-container">
            <div class="grid-header">
                <div id="header-0" class="grid-item first">Key</div>
                @for((env, index) <- environments.zipWithIndex) {
                    <div class="gutter gutter-horizontal"></div>
                    <div id="header-@{index + 1}" class="grid-item">@env</div>
                }
            </div>
            @for((key: String, entries: List[ConfigByKeyEntry]) <- ListMap(configByKey.toMap.toSeq.sortWith(_._1 < _._1):_*)) {
                <div class="grid-row">
                    <div class="grid-item first">@key</div>
                    @for(env <- environments) {
                        <div class="grid-item">
                            <ul>
                            @for(entry: ConfigByKeyEntry <- sortBySourcePrecedence(filterForEnv(env, entries))) {
                                <li>@entry.configSource: @entry.value</li>
                            }
                            </ul>
                        </div>
                    }
                </div>
            }
        </div>
        @{/*<div class="grid-header">
            <div id="header-1" class="grid-item first">Header 1</div>
            <div class="gutter gutter-horizontal"></div>
            <div id="header-2" class="grid-item">Header 2</div>
            <div class="gutter gutter-horizontal"></div>
            <div id="header-3" class="grid-item">Header 3</div>
            <div class="gutter gutter-horizontal"></div>
            <div id="header-4" class="grid-item">Header 4</div>
            <div class="gutter gutter-horizontal"></div>
            <div id="header-5" class="grid-item">Header 5</div>
            <div class="gutter gutter-horizontal"></div>
            <div id="header-6" class="grid-item">Header 6</div>
        </div>
        <div class="grid-container">
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
            <div class="grid-row">
                <div class="grid-item first">Sticky Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
                <div class="grid-item">Item</div>
            </div>
        </div>*/}


    @{/* <h3>
        Internal Application Config - <a href="https://www.github.com/hmrc/@serviceName/blob/master/conf/application.conf">@serviceName/conf/application.conf</a>
    </h3>
    <div class="scroll-x">
        <table class="table table-striped">
           <tbody>
               <tr><th>Key</th><th>Value</th></tr>
            @printMap((Service, ApplicationConf))
           </tbody>
        </table>
    </div>
    <h3>
        'base' Config - <a href="https://www.github.com/hmrc/app-config-base/blob/master/@{serviceName}.conf">app-config-base</a>
    </h3>
    <div class="scroll-x">
        <table class="table table-striped">
            <tbody>
                <tr><th>Key</th><th>Value</th></tr>
                @printMap((Base, BaseConfig))
            </tbody>
        </table>
    </div>
    @for(env <- environments) {
        <h2>@env.name Config</h2>
        <h3>
            <a href="https://www.github.com/hmrc/app-config-common/blob/master/@env-frontend-common.yaml">common overridable</a>
        </h3>
        <p>These settings are common to all services of this type in this environment</p>
        <div class="scroll-x">
            <table class="table table-striped">
                <tbody>
                    <tr><th>Key</th><th>Value</th></tr>
                    @printMap((env, AppConfigCommonOverridable))
                </tbody>
            </table>
        </div>

            <h3>
                <a href="https://www.github.com/hmrc/app-config-@env/blob/master/@{serviceName}.yaml">app specific</a>
            </h3>
            <div class="scroll-x">
                <table class="table table-striped">
                    <tbody>
                        <tr><th>Key</th><th>Value</th></tr>
                        @printMap((env, AppConfig))
                    </tbody>
                </table>
            </div>

            <h3>
                <a href="https://www.github.com/hmrc/app-config-common/blob/master/@env-frontend-common.yaml">common fixed</a>
            </h3>
            <p>These settings are common to all services of this type in this environment</p>
            <div class="scroll-x">
                <table class="table table-striped">
                    <tbody>
                        <tr><th>Key</th><th>Value</th></tr>
                        @printMap((env, AppConfigCommonFixed))
                    </tbody>
                </table>
            </div>
        }
        */}
    </body>
</html>